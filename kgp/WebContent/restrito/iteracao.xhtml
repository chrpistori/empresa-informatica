<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/templates/principal.xhtml">

	<ui:define name="titulo">
		KGP - Iteração
	</ui:define>

	<ui:define name="corpo">
		<div id="three-columns">
			<div class="content">
				<h:form id="form">
					<p:growl id="messages" sticky="false" time="3000" globalOnly="true" />
					<h:outputText value="Iteração" styleClass="titulo" />
					<br />
					<br />
					<h:inputHidden value="#{projetoEditController.projeto.id}"
						id="hiddenid" />
					<h:panelGrid columns="3" id="grid">

						<p:outputLabel value="Nome:" />
						<p:inputText id="nome" label="Nome"
							value="#{iteracaoEditController.iteracao.nome}" size="30"
							maxlength="30" required="true"
							requiredMessage="Campo Obrigatório" />
						<p:message for="nome" display="text" />
						
						<p:outputLabel value="Limite de Tarefas:" />
						<p:inputMask id="limite" label="Limite de Tarefas"
							value="#{iteracaoEditController.iteracao.limiteTarefas}" size="10"
							maxlength="2" required="true" mask="9"
							requiredMessage="Campo Obrigatório" />
						<p:message for="limite" display="text" />

						<p:outputLabel value="Data de Início:" />
						<p:calendar value="#{iteracaoEditController.iteracao.dataInicio}"
							navigator="true" id="datainicio" showOn="button"
							pattern="dd/MM/yyyy" required="true" locale="pt"
							requiredMessage="Campo Obrigatório" />
						<p:message for="datainicio" display="text" />

						<p:outputLabel value="Data de Término:" />
						<p:calendar value="#{iteracaoEditController.iteracao.dataTermino}"
							navigator="true" id="datatermino" showOn="button"
							pattern="dd/MM/yyyy" required="true" locale="pt"
							requiredMessage="Campo Obrigatório" />
						<p:message for="datatermino" display="text" />

						<p:outputLabel value="Projeto:" />
						<p:dataTable id="projeto" var="projeto"
							value="#{projetoConsultaController.lista}"
							emptyMessage="Não foram encontrados resultados."
							selection="#{iteracaoEditController.iteracao.projeto}"
							rowKey="#{projeto.id}" paginator="true"
							paginatorPosition="bottom" rows="10" required="true"
							requiredMessage="Obrigatório">
							<f:facet name="header">
								<p:outputLabel value="Projetos Cadastrados" />
							</f:facet>
							<p:column selectionMode="single" style="width:2%" />
							<p:column sortBy="#{projeto.nome}" headerText="Projeto"
								style="width:25%">
								<p:outputLabel value="#{projeto.nome}" />
							</p:column>
							<p:column sortBy="#{projeto.dataInicio}"
								headerText="Data de Início" style="width:25%">
								<h:outputText value="#{projeto.dataInicio}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</p:column>
							<p:column sortBy="#{projeto.dataTermino}"
								headerText="Data de Término" style="width:24%">
								<h:outputText value="#{projeto.dataTermino}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</p:column>

						</p:dataTable>
						<p:message for="projeto" display="text" />

					</h:panelGrid>
					<br />
					<br />
					<p:commandButton update="form"
						action="#{iteracaoEditController.salvar}" value="Cadastrar" />
				</h:form>
			</div>
		</div>
	</ui:define>
</ui:composition>
</html>